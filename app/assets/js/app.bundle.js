(()=>{"use strict";var e,t,n,a,i={388:(e,t,n)=>{n.a(e,(async(e,t)=>{try{var a=n(330),i=n(420);async function r(){await a.$.setup_listeners(),await i.j.setup_listeners(),console.log("Usable Balance App - Ready :)")}await r(),t()}catch(c){t(c)}}),1)},420:(e,t,n)=>{n.d(t,{j:()=>a});class a{static async setup_listeners(){const e=document.getElementById("entities-entity-create");e&&e.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("entity_name"),n=document.getElementById("entity_name_legal"),a={name:t&&t.value&&""!==t.value.trim()?t.value:null,name_legal:n&&n.value&&""!==n.value.trim()?n.value:null,desc:document.getElementById("entity_desc").value,country:document.getElementById("entity_country").value,identifier:[{type:"BANK:PAYEE",value:document.getElementById("entity_identifier_payee").value}]},i=document.getElementById("entity_identifier_nzbn");""!==i.value&&(a.id_src="GS1:"+i.value,a.identifier.push({type:"GS1",value:i.value}));const r=document.getElementById("entity_identifier_ird");""!==r.value&&a.identifier.push({type:"IRD",value:r.value});const c=document.getElementById("entity_identifier_gst_registered");"Y"==c.value&&a.identifier.push({type:"NZ:GST",value:c.value});const s=document.getElementById("entity_contact_email");""!==s.value&&a.contact.push({type:"EMAIL",value:s.value});const o=document.getElementById("entity_contact_phone");""!==o.value&&a.contact.push({type:"PHONE",value:o.value});const l=document.getElementById("entity_contact_website");""!==l.value&&a.contact.push({type:"WEBSITE",value:l.value}),fetch("/app/entities/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);element.innerHTML='<i class="bi bi-check-circle-fill"></i> Entity Created',element.classList.remove("btn-primary"),element.classList.add("btn-success"),element.classList.add("disabled"),element.disabled=!0})).then((e=>!0)).catch((e=>(console.error("Error:",e),!1)))}))}}},330:(e,t,n)=>{n.d(t,{$:()=>a});class a{static async setup_listeners(){const e=document.getElementById("entities-feed-match-search");e&&e.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("entity_identifier_payee"),n=document.getElementById("entity_identifier_reference"),a=document.getElementById("entity_identifier_code"),i=t.value,r=n.value,c=a.value,s=`/app/entities/match/feed?payee=${encodeURIComponent(i)}&reference=${encodeURIComponent(r)}&code=${encodeURIComponent(c)}`,o=document.getElementById("entities-feed-match-results");fetch(s).then((e=>e.text())).then((async e=>{o.innerHTML=e})).catch((e=>{console.error("Error:",e)}))}));const t=document.getElementById("entities-search");t&&t.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("entity_name").value,n=`/app/entities/match/entity?name=${encodeURIComponent(t)}`,i=document.getElementById("entities-match-results");fetch(n).then((e=>e.text())).then((e=>{i.innerHTML=e,setTimeout((()=>{a.setup_entity_result_listeners()}),100)})).catch((e=>{console.error("Error:",e)}))}));const n=document.getElementById("ext-entities-search");n&&n.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("entity_name_search").value,n=`/app/entities/match/ext-entity?name=${encodeURIComponent(t)}`,i=document.getElementById("ext-entities-match-results");fetch(n).then((e=>e.text())).then((e=>{i.innerHTML=e,setTimeout((()=>{a.setup_ext_entity_result_listeners()}),100)})).catch((e=>{console.error("Error:",e)}))}))}static async setup_entity_result_listeners(){const e=document.querySelectorAll(".entity-transaction-match"),t=document.getElementById("entity_identifier_payee"),n=document.getElementById("entity_identifier_reference"),i=document.getElementById("entity_identifier_code"),r=t.value;n.value,i.value,e.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.target.dataset.entityId;return a.entity_match_payee(e.target,t,r)}))}))}static async setup_ext_entity_result_listeners(){const e=document.querySelectorAll(".ext-entity-transaction-match"),t=document.getElementById("entity_name"),n=document.getElementById("entity_name_legal"),a=document.getElementById("entity_identifier_nzbn");e.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),e.target.dataset.entityId;const i=e.target.dataset;console.log(i),t.value=JSON.parse(i.entityName).join(", "),n.value=i.entityNameLegal,a.value=i.entityNzbn}))}))}static async entity_match_payee(e,t,n){const a={identifier:[{type:"BANK:PAYEE",value:n}]};fetch("/app/entities/"+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);e.innerHTML='<i class="bi bi-check-circle-fill"></i> Matched Transaction(s)',e.classList.remove("btn-primary"),e.classList.add("btn-success"),e.classList.add("disabled"),e.disabled=!0})).then((e=>!0)).catch((e=>(console.error("Error:",e),!1)))}}}},r={};function c(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return i[e](n,n.exports,c),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},c.a=(i,r,c)=>{var s;c&&((s=[]).d=-1);var o,l,d,u=new Set,y=i.exports,m=new Promise(((e,t)=>{d=t,l=e}));m[t]=y,m[e]=e=>(s&&e(s),u.forEach(e),m.catch((e=>{}))),i.exports=m,r((i=>{var r;o=(i=>i.map((i=>{if(null!==i&&"object"==typeof i){if(i[e])return i;if(i.then){var r=[];r.d=0,i.then((e=>{c[t]=e,a(r)}),(e=>{c[n]=e,a(r)}));var c={};return c[e]=e=>e(r),c}}var s={};return s[e]=e=>{},s[t]=i,s})))(i);var c=()=>o.map((e=>{if(e[n])throw e[n];return e[t]})),l=new Promise((t=>{(r=()=>t(c)).r=0;var n=e=>e!==s&&!u.has(e)&&(u.add(e),e&&!e.d&&(r.r++,e.push(r)));o.map((t=>t[e](n)))}));return r.r?l:c()}),(e=>(e?d(m[n]=e):l(y),a(s)))),s&&s.d<0&&(s.d=0)},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c(388)})();
//# sourceMappingURL=app.bundle.js.map