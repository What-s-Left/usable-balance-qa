(()=>{"use strict";var e,t,n,a,i={388:(e,t,n)=>{n.a(e,(async(e,t)=>{try{var a=n(330),i=n(420),s=n(704);async function r(){await a.$.setup_listeners(),await i.j.setup_listeners(),await s.a.setup_listeners(),console.log("Usable Balance App - Ready :)")}await r(),t()}catch(c){t(c)}}),1)},420:(e,t,n)=>{n.d(t,{j:()=>s});var a=n(465),i=n(330);class s{static async setup_listeners(){const e=document.getElementById("entity_identifier_tradingname-add");e&&e.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("entity_identifier_tradingname");if(""!=t.value){const e=document.getElementById("entity_identifier_tradingname_value");var n=document.getElementById("entity_identifier_tradingname_values"),a=e.cloneNode(!0);a.removeAttribute("id"),a.classList.remove("visually-hidden"),a.classList.add("entity_trading_name"),a.innerHTML=t.value+'  <i class="bi bi-x-circle-fill"></i>',a.dataset.entityTradingName=t.value,n.innerHTML+=a.outerHTML,setTimeout((()=>{i.$.setup_ext_entity_trading_name_listeners()}),100)}}));const t=document.getElementById("entities-entity-create");t&&t.addEventListener("click",(e=>{if(e.preventDefault(),!document.getElementById("entity-form").checkValidity())return console.log("INVALID!"),!1;const t=document.getElementById("entity_name"),n=document.getElementById("entity_identifier_nzbn"),i=document.getElementById("entity_identifier_ird"),s=document.getElementById("entity_classification_expense"),r=document.getElementById("entity_classification_revenue"),c=document.getElementById("entity_classification_gst_registered"),o=document.getElementById("entity_desc"),d=document.getElementById("entity_contact_address"),l=document.getElementById("entity_contact_postcode"),u=document.getElementById("entity_contact_email"),y=document.getElementById("entity_contact_phone"),m=document.getElementById("entity_contact_website"),_=document.getElementById("entity_contact_country");var v,p=a.B.get("entity_base"),g=t.value,h=[];document.querySelectorAll(".entity_trading_name").forEach((e=>{h.push({type:"TRADINGNAME",value:e.dataset.entityTradingName})})),""!=n.value&&(v="GS1:"+n.value,h.push({type:"GS1",value:n.value})),""!=i.value&&h.push({type:"IRD",value:i.value});var E=p.classification;E.push({type:"CREDIT",value:r.value}),E.push({type:"DEBIT",value:s.value}),""!=c.value&&E.push({type:"NZ:GST",value:c.value});var f=[];""!=d.value&&f.push({type:"ADDRESS",value:d.value}),""!=l.value&&f.push({type:"POSTCODE",value:l.value}),""!=y.value&&f.push({type:"PHONE",value:y.value}),""!=u.value&&f.push({type:"EMAIL",value:u.value}),""!=m.value&&f.push({type:"WEBSITE",value:m.value});var I=o.value,B=_.value;const b={id_src:v,name:g,desc:I,identifier:h,classification:E,contact:f,country:B};fetch("/app/entities/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).then((t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);e.target.innerHTML='<i class="bi bi-check-circle-fill"></i> Entity Created',e.target.classList.remove("btn-primary"),e.target.classList.add("btn-success"),e.target.classList.add("disabled"),e.target.disabled=!0})).catch((e=>(console.error("Error:",e),!1)))}));const n=document.getElementById("entities-entity-update");n&&(i.$.setup_ext_entity_trading_name_listeners(),n.addEventListener("click",(e=>{if(e.preventDefault(),!document.getElementById("entity-form").checkValidity())return console.log("INVALID!"),!1;const t=document.getElementById("entity_id"),n=document.getElementById("entity_name"),a=document.getElementById("entity_identifier_nzbn"),i=document.getElementById("entity_identifier_ird"),s=document.getElementById("entity_classification_expense"),r=document.getElementById("entity_classification_revenue"),c=document.getElementById("entity_classification_gst_registered"),o=document.getElementById("entity_desc"),d=document.getElementById("entity_contact_address"),l=document.getElementById("entity_contact_postcode"),u=document.getElementById("entity_contact_email"),y=document.getElementById("entity_contact_phone"),m=document.getElementById("entity_contact_website"),_=document.getElementById("entity_contact_country");var v,p=t.value,g=n.value,h=[];document.querySelectorAll(".entity_trading_name").forEach((e=>{h.push({type:"TRADINGNAME",value:e.dataset.entityTradingName})})),""!=a.value&&(v="GS1:"+a.value,h.push({type:"GS1",value:a.value})),""!=i.value&&h.push({type:"IRD",value:i.value});var E=[];E.push({type:"CREDIT",value:r.value}),E.push({type:"DEBIT",value:s.value}),""!=c.value&&E.push({type:"NZ:GST",value:c.value});var f=[];""!=d.value&&f.push({type:"ADDRESS",value:d.value}),""!=l.value&&f.push({type:"POSTCODE",value:l.value}),""!=y.value&&f.push({type:"PHONE",value:y.value}),""!=u.value&&f.push({type:"EMAIL",value:u.value}),""!=m.value&&f.push({type:"WEBSITE",value:m.value});var I=o.value,B=_.value;const b={id_src:v,name:g,desc:I,identifier:h,classification:E,contact:f,country:B};fetch("/app/entities/"+p,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).then((t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);e.target.innerHTML='<i class="bi bi-check-circle-fill"></i> Entity Updated',e.target.classList.remove("btn-primary"),e.target.classList.add("btn-success")})).catch((e=>(console.error("Error:",e),!1)))})))}}},330:(e,t,n)=>{n.d(t,{$:()=>i});var a=n(465);class i{static async setup_listeners(){const e=document.getElementById("entities-feed-match-search");e&&e.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("entity_identifier_payee"),n=document.getElementById("entity_identifier_reference"),a=document.getElementById("entity_identifier_code"),i=t.value,s=n.value,r=a.value,c=`/app/entities/match/api/feed?payee=${encodeURIComponent(i)}&reference=${encodeURIComponent(s)}&code=${encodeURIComponent(r)}`,o=document.getElementById("entities-feed-match-results");fetch(c).then((e=>e.text())).then((async e=>{o.innerHTML=e})).catch((e=>{console.error("Error:",e)}))}));const t=document.getElementById("entities-search");t&&t.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("entity_name").value,n=`/app/entities/match/api/entity?name=${encodeURIComponent(t)}`,a=document.getElementById("entities-match-results");fetch(n).then((e=>e.text())).then((e=>{a.innerHTML=e,setTimeout((()=>{i.setup_entity_result_listeners()}),100)})).catch((e=>{console.error("Error:",e)}))}));const n=document.getElementById("ext-entities-search");n&&n.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("entity_name_search").value,n=`/app/entities/match/api/ext-entity?name=${encodeURIComponent(t)}`,a=document.getElementById("ext-entities-match-results");fetch(n).then((e=>e.text())).then((e=>{a.innerHTML=e,setTimeout((()=>{i.setup_ext_entity_result_listeners()}),100)})).catch((e=>{console.error("Error:",e)}))}))}static async setup_entity_result_listeners(){const e=document.querySelectorAll(".entity-transaction-match"),t=document.getElementById("entity_identifier_payee"),n=document.getElementById("entity_identifier_reference"),a=document.getElementById("entity_identifier_code"),s=t.value;n.value,a.value,e.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.target.dataset.entityId;return i.entity_match_payee(e.target,t,s)}))}))}static async setup_ext_entity_result_listeners(){const e=document.querySelectorAll(".ext-entity-transaction-match"),t=document.getElementById("entity_name"),n=document.getElementById("entity_identifier_nzbn"),s=document.getElementById("entity_identifier_ird"),r=document.getElementById("entity_desc"),c=document.getElementById("entity_contact_address"),o=document.getElementById("entity_contact_postcode"),d=document.getElementById("entity_contact_phone"),l=document.getElementById("entity_contact_website");document.getElementById("entity_contact_country"),e.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),e.target.dataset.entityId;const u=e.target.dataset.entityName,y=e.target.dataset,m=JSON.parse(y.entityIdentifier),_=JSON.parse(y.entityClassification),v=JSON.parse(y.entityContact);a.B.set("entity_base",{name:u,identifier:m,classification:_,contact:v});var p=[],g="";const h=document.getElementById("entity_identifier_tradingname_value");var E=document.getElementById("entity_identifier_tradingname_values"),f=h;for(const e of m)"TRADINGNAME"==e.type&&((f=h.cloneNode(!0)).removeAttribute("id"),f.classList.remove("visually-hidden"),f.classList.add("entity_trading_name"),f.innerHTML=e.value+'  <i class="bi bi-x-circle-fill"></i>',f.dataset.entityTradingName=e.value,p.push(e.value),g+=f.outerHTML);E.innerHTML=g,t.value=y.entityName,n.value=y.entityIdentifierNzbn,s.value=y.entityIdentifierIrd,r.value=y.entityClassificationBicDesc,c.value=y.entityContactAddress,o.value=y.entityContactPostcode,d.value=y.entityContactPhone,l.value=y.entityContactWebsite,setTimeout((()=>{i.setup_ext_entity_trading_name_listeners()}),100)}))}))}static async setup_ext_entity_trading_name_listeners(){document.querySelectorAll(".entity_trading_name").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),e.target.remove()}))}))}static async entity_match_payee(e,t,n){const a={feed:[{type:"BANK:PAYEE",value:n}]};fetch("/app/entities/"+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);e.innerHTML='<i class="bi bi-check-circle-fill"></i> Matched Transaction(s)',e.classList.remove("btn-primary"),e.classList.add("btn-success"),e.classList.add("disabled"),e.disabled=!0})).then((e=>!0)).catch((e=>(console.error("Error:",e),!1)))}}},465:(e,t,n)=>{n.d(t,{B:()=>a});class a{static get(e){const t=sessionStorage.getItem(e);return JSON.parse(t)}static set(e,t){return t=JSON.stringify(t),sessionStorage.setItem(e,t),t}static del(e){return sessionStorage.removeItem(e),!0}}},704:(e,t,n)=>{n.d(t,{a:()=>i});class a{static param_add(e,t){const n=new URL(window.location),a=new URLSearchParams(n.search);a.set(e,t),n.search=a.toString(),window.location.href=n.href}static parse_hash(){return new Proxy(new URLSearchParams(window.location.hash.slice(1)),{get:(e,t)=>e.get(t)})}static parse_query_string(){return new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)})}static random_string(e){for(var t="",n=0;n<e;n++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return t}}class i{static async setup_listeners(){const e=document.getElementById("transactions-search-status");e&&e.addEventListener("change",(t=>{t.preventDefault(),a.param_add("status",e.value)}));const t=document.getElementById("transactions-search-keyword");t&&t.addEventListener("click",(e=>{e.preventDefault();var t=document.getElementById("transactions-search-keyword-text");a.param_add("search",t.value)}))}}}},s={};function r(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return i[e](n,n.exports,r),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},r.a=(i,s,r)=>{var c;r&&((c=[]).d=-1);var o,d,l,u=new Set,y=i.exports,m=new Promise(((e,t)=>{l=t,d=e}));m[t]=y,m[e]=e=>(c&&e(c),u.forEach(e),m.catch((e=>{}))),i.exports=m,s((i=>{var s;o=(i=>i.map((i=>{if(null!==i&&"object"==typeof i){if(i[e])return i;if(i.then){var s=[];s.d=0,i.then((e=>{r[t]=e,a(s)}),(e=>{r[n]=e,a(s)}));var r={};return r[e]=e=>e(s),r}}var c={};return c[e]=e=>{},c[t]=i,c})))(i);var r=()=>o.map((e=>{if(e[n])throw e[n];return e[t]})),d=new Promise((t=>{(s=()=>t(r)).r=0;var n=e=>e!==c&&!u.has(e)&&(u.add(e),e&&!e.d&&(s.r++,e.push(s)));o.map((t=>t[e](n)))}));return s.r?d:r()}),(e=>(e?l(m[n]=e):d(y),a(c)))),c&&c.d<0&&(c.d=0)},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r(388)})();
//# sourceMappingURL=app.bundle.js.map