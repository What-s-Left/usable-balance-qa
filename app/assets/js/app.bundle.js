(()=>{"use strict";var e,t,n,a,r={388:(e,t,n)=>{n.a(e,(async(e,t)=>{try{var a=n(330),r=n(420);async function i(){await a.$.setup_listeners(),await r.j.setup_listeners(),console.log("Usable Balance App - Ready :)")}await i(),t()}catch(c){t(c)}}),1)},420:(e,t,n)=>{n.d(t,{j:()=>a});class a{static async setup_listeners(){const e=document.getElementById("entities-entity-create");e&&e.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("entity_name"),n=document.getElementById("entity_name_legal"),a={name:t&&t.value&&""!==t.value.trim()?t.value:null,name_legal:n&&n.value&&""!==n.value.trim()?n.value:null,desc:document.getElementById("entity_desc").value,country:document.getElementById("entity_country").value,identifier:[{type:"BANK:PAYEE",value:document.getElementById("entity_identifier_payee").value}]},r=document.getElementById("entity_identifier_nzbn");""!==r.value&&(a.id_src="GS1:"+r.value,a.identifier.push({type:"GS1",value:r.value}));const i=document.getElementById("entity_identifier_ird");""!==i.value&&a.identifier.push({type:"IRD",value:i.value});const c=document.getElementById("entity_identifier_gst_registered");"Y"==c.value&&a.identifier.push({type:"NZ:GST",value:c.value});const s=document.getElementById("entity_contact_email");""!==s.value&&a.contact.push({type:"EMAIL",value:s.value});const o=document.getElementById("entity_contact_phone");""!==o.value&&a.contact.push({type:"PHONE",value:o.value});const l=document.getElementById("entity_contact_website");""!==l.value&&a.contact.push({type:"WEBSITE",value:l.value}),fetch("/app/entities/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);element.innerHTML='<i class="bi bi-check-circle-fill"></i> Entity Created',element.classList.remove("btn-primary"),element.classList.add("btn-success"),element.classList.add("disabled"),element.disabled=!0})).then((e=>!0)).catch((e=>(console.error("Error:",e),!1)))}))}}},330:(e,t,n)=>{n.d(t,{$:()=>a});class a{static async setup_listeners(){const e=document.getElementById("entities-feed-match-search");e&&e.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("entity_identifier_payee"),n=document.getElementById("entity_identifier_reference"),a=document.getElementById("entity_identifier_code"),r=t.value,i=n.value,c=a.value,s=`/app/entities/match/feed?payee=${encodeURIComponent(r)}&reference=${encodeURIComponent(i)}&code=${encodeURIComponent(c)}`,o=document.getElementById("entities-feed-match-results");fetch(s).then((e=>e.text())).then((async e=>{o.innerHTML=e})).catch((e=>{console.error("Error:",e)}))}));const t=document.getElementById("entities-search");t&&t.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("entity_name").value,n=`/app/entities/match/entity?name=${encodeURIComponent(t)}`,r=document.getElementById("entities-match-results");fetch(n).then((e=>e.text())).then((e=>{r.innerHTML=e,setTimeout((()=>{a.setup_entity_result_listeners()}),100)})).catch((e=>{console.error("Error:",e)}))}))}static async setup_entity_result_listeners(){const e=document.querySelectorAll(".entity-transaction-match"),t=document.getElementById("entity_identifier_payee"),n=document.getElementById("entity_identifier_reference"),r=document.getElementById("entity_identifier_code"),i=t.value;n.value,r.value,e.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.target.dataset.entityId;return a.entity_match_payee(e.target,t,i)}))}))}static async entity_match_payee(e,t,n){const a={identifier:[{type:"BANK:PAYEE",value:n}]};fetch("/app/entities/"+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);e.innerHTML='<i class="bi bi-check-circle-fill"></i> Matched Transaction(s)',e.classList.remove("btn-primary"),e.classList.add("btn-success"),e.classList.add("disabled"),e.disabled=!0})).then((e=>!0)).catch((e=>(console.error("Error:",e),!1)))}}}},i={};function c(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return r[e](n,n.exports,c),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},c.a=(r,i,c)=>{var s;c&&((s=[]).d=-1);var o,l,d,u=new Set,y=r.exports,m=new Promise(((e,t)=>{d=t,l=e}));m[t]=y,m[e]=e=>(s&&e(s),u.forEach(e),m.catch((e=>{}))),r.exports=m,i((r=>{var i;o=(r=>r.map((r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var i=[];i.d=0,r.then((e=>{c[t]=e,a(i)}),(e=>{c[n]=e,a(i)}));var c={};return c[e]=e=>e(i),c}}var s={};return s[e]=e=>{},s[t]=r,s})))(r);var c=()=>o.map((e=>{if(e[n])throw e[n];return e[t]})),l=new Promise((t=>{(i=()=>t(c)).r=0;var n=e=>e!==s&&!u.has(e)&&(u.add(e),e&&!e.d&&(i.r++,e.push(i)));o.map((t=>t[e](n)))}));return i.r?l:c()}),(e=>(e?d(m[n]=e):l(y),a(s)))),s&&s.d<0&&(s.d=0)},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c(388)})();
//# sourceMappingURL=app.bundle.js.map