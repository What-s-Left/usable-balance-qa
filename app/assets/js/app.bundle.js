(()=>{"use strict";var e,t,n,i,a={388:(e,t,n)=>{n.a(e,(async(e,t)=>{try{var i=n(330),a=n(420);async function c(){await i.$.setup_listeners(),await a.j.setup_listeners(),console.log("Usable Balance App - Ready :)")}await c(),t()}catch(r){t(r)}}),1)},420:(e,t,n)=>{n.d(t,{j:()=>i});class i{static async setup_listeners(){const e=document.getElementById("entities-entity-create");e&&e.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("entity_name"),n=document.getElementById("entity_name_legal"),i={name:t&&t.value&&""!==t.value.trim()?t.value:null,name_legal:n&&n.value&&""!==n.value.trim()?n.value:null,desc:document.getElementById("entity_desc").value,country:document.getElementById("entity_country").value,identifier:[{type:"BANK:PAYEE",value:document.getElementById("entity_identifier_payee").value}]},a=document.getElementById("entity_identifier_nzbn");""!==a.value&&(i.id_src="GS1:"+a.value,i.identifier.push({type:"GS1",value:a.value}));const c=document.getElementById("entity_identifier_ird");""!==c.value&&i.identifier.push({type:"IRD",value:c.value});const r=document.getElementById("entity_identifier_gst_registered");"Y"==r.value&&i.identifier.push({type:"NZ:GST",value:r.value});const s=document.getElementById("entity_contact_email");""!==s.value&&i.contact.push({type:"EMAIL",value:s.value});const o=document.getElementById("entity_contact_phone");""!==o.value&&i.contact.push({type:"PHONE",value:o.value});const l=document.getElementById("entity_contact_website");""!==l.value&&i.contact.push({type:"WEBSITE",value:l.value}),fetch("/app/entities/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);element.innerHTML='<i class="bi bi-check-circle-fill"></i> Entity Created',element.classList.remove("btn-primary"),element.classList.add("btn-success"),element.classList.add("disabled"),element.disabled=!0})).then((e=>!0)).catch((e=>(console.error("Error:",e),!1)))}))}}},330:(e,t,n)=>{n.d(t,{$:()=>i});class i{static async setup_listeners(){const e=document.getElementById("entities-feed-match-search");e&&e.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("entity_identifier_payee"),n=document.getElementById("entity_identifier_reference"),i=document.getElementById("entity_identifier_code"),a=t.value,c=n.value,r=i.value,s=`/app/entities/match/feed?payee=${encodeURIComponent(a)}&reference=${encodeURIComponent(c)}&code=${encodeURIComponent(r)}`,o=document.getElementById("entities-feed-match-results");fetch(s).then((e=>e.text())).then((async e=>{o.innerHTML=e})).catch((e=>{console.error("Error:",e)}))}));const t=document.getElementById("entities-search");t&&t.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("entity_name").value,n=`/app/entities/match/entity?name=${encodeURIComponent(t)}`,a=document.getElementById("entities-match-results");fetch(n).then((e=>e.text())).then((e=>{a.innerHTML=e,setTimeout((()=>{i.setup_entity_result_listeners()}),100)})).catch((e=>{console.error("Error:",e)}))}));const n=document.getElementById("ext-entities-search");n&&n.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("entity_name_search").value,n=`/app/entities/match/ext-entity?name=${encodeURIComponent(t)}`,a=document.getElementById("ext-entities-match-results");fetch(n).then((e=>e.text())).then((e=>{a.innerHTML=e,setTimeout((()=>{i.setup_ext_entity_result_listeners()}),100)})).catch((e=>{console.error("Error:",e)}))}))}static async setup_entity_result_listeners(){const e=document.querySelectorAll(".entity-transaction-match"),t=document.getElementById("entity_identifier_payee"),n=document.getElementById("entity_identifier_reference"),a=document.getElementById("entity_identifier_code"),c=t.value;n.value,a.value,e.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.target.dataset.entityId;return i.entity_match_payee(e.target,t,c)}))}))}static async setup_ext_entity_result_listeners(){const e=document.querySelectorAll(".ext-entity-transaction-match"),t=document.getElementById("entity_name"),n=document.getElementById("entity_name_legal"),i=document.getElementById("entity_identifier_nzbn"),a=document.getElementById("entity_identifier_ird"),c=document.getElementById("entity_desc"),r=document.getElementById("entity_contact_website"),s=document.getElementById("json_entity_name"),o=document.getElementById("json_entity_identifier"),l=document.getElementById("json_entity_classification"),d=document.getElementById("json_entity_contact");e.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),e.target.dataset.entityId,e.target.dataset.entityName;const u=e.target.dataset;s.value=u.entityName,o.value=u.entityIdentifier,l.value=u.entityClassification,d.value=u.entityContact,t.value=JSON.parse(u.entityName).join(", "),n.value=u.entityNameLegal,i.value=u.entityIdentifierNzbn,a.value=u.entityIdentifierIrd,a.value=u.entityIdentifierIrd,c.value=u.entityClassificationBicDesc,r.value=u.entityContactWebsite}))}))}static async entity_match_payee(e,t,n){const i={identifier:[{type:"BANK:PAYEE",value:n}]};fetch("/app/entities/"+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);e.innerHTML='<i class="bi bi-check-circle-fill"></i> Matched Transaction(s)',e.classList.remove("btn-primary"),e.classList.add("btn-success"),e.classList.add("disabled"),e.disabled=!0})).then((e=>!0)).catch((e=>(console.error("Error:",e),!1)))}}}},c={};function r(e){var t=c[e];if(void 0!==t)return t.exports;var n=c[e]={exports:{}};return a[e](n,n.exports,r),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",i=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},r.a=(a,c,r)=>{var s;r&&((s=[]).d=-1);var o,l,d,u=new Set,y=a.exports,m=new Promise(((e,t)=>{d=t,l=e}));m[t]=y,m[e]=e=>(s&&e(s),u.forEach(e),m.catch((e=>{}))),a.exports=m,c((a=>{var c;o=(a=>a.map((a=>{if(null!==a&&"object"==typeof a){if(a[e])return a;if(a.then){var c=[];c.d=0,a.then((e=>{r[t]=e,i(c)}),(e=>{r[n]=e,i(c)}));var r={};return r[e]=e=>e(c),r}}var s={};return s[e]=e=>{},s[t]=a,s})))(a);var r=()=>o.map((e=>{if(e[n])throw e[n];return e[t]})),l=new Promise((t=>{(c=()=>t(r)).r=0;var n=e=>e!==s&&!u.has(e)&&(u.add(e),e&&!e.d&&(c.r++,e.push(c)));o.map((t=>t[e](n)))}));return c.r?l:r()}),(e=>(e?d(m[n]=e):l(y),i(s)))),s&&s.d<0&&(s.d=0)},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r(388)})();
//# sourceMappingURL=app.bundle.js.map