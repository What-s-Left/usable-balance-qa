(()=>{"use strict";var e,t,n,a,i={641:(e,t,n)=>{n.a(e,(async(e,t)=>{try{var a=n(679),i=n(515);async function c(){await a.a.setup_listeners(),await i.i.setup_listeners(),console.log("Usable Balance App - Ready :)")}await c(),t()}catch(s){t(s)}}),1)},515:(e,t,n)=>{n.d(t,{i:()=>c});var a=n(572),i=n(679);class c{static async setup_listeners(){const e=document.getElementById("entity_identifier_tradingname-add");e&&e.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("entity_identifier_tradingname");if(""!=t.value){const e=document.getElementById("entity_identifier_tradingname_value");var n=document.getElementById("entity_identifier_tradingname_values"),a=e.cloneNode(!0);a.removeAttribute("id"),a.classList.remove("visually-hidden"),a.classList.add("entity_trading_name"),a.innerHTML=t.value+'  <i class="bi bi-x-circle-fill"></i>',a.dataset.entityTradingName=t.value,n.innerHTML+=a.outerHTML,setTimeout((()=>{i.a.setup_ext_entity_trading_name_listeners()}),100)}}));const t=document.getElementById("entities-entity-create");t&&t.addEventListener("click",(e=>{if(e.preventDefault(),!document.getElementById("entity-form").checkValidity())return console.log("INVALID!"),!1;const t=document.getElementById("entity_name"),n=document.getElementById("entity_identifier_nzbn"),i=document.getElementById("entity_identifier_ird"),c=document.getElementById("entity_classification_expense"),s=document.getElementById("entity_classification_revenue"),r=document.getElementById("entity_classification_gst_registered"),o=document.getElementById("entity_desc"),d=document.getElementById("entity_contact_address"),l=document.getElementById("entity_contact_postcode"),u=document.getElementById("entity_contact_email"),y=document.getElementById("entity_contact_phone"),m=document.getElementById("entity_contact_website"),_=document.getElementById("entity_contact_country");var v,p=a.V.get("entity_base"),g=t.value,E=[];document.querySelectorAll(".entity_trading_name").forEach((e=>{E.push({type:"TRADINGNAME",value:e.dataset.entityTradingName})})),""!=n.value&&(v="GS1:"+n.value,E.push({type:"GS1",value:n.value})),""!=i.value&&E.push({type:"IRD",value:i.value});var f=p.classification;f.push({type:"CREDIT",value:s.value}),f.push({type:"DEBIT",value:c.value}),""!=r.value&&f.push({type:"NZ:GST",value:r.value});var h=[];""!=d.value&&h.push({type:"ADDRESS",value:d.value}),""!=l.value&&h.push({type:"POSTCODE",value:l.value}),""!=y.value&&h.push({type:"PHONE",value:y.value}),""!=u.value&&h.push({type:"EMAIL",value:u.value}),""!=m.value&&h.push({type:"WEBSITE",value:m.value});var I=o.value,B=_.value;const b={id_src:v,name:g,desc:I,identifier:E,classification:f,contact:h,country:B};fetch("/app/entities/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).then((t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);e.target.innerHTML='<i class="bi bi-check-circle-fill"></i> Entity Created',e.target.classList.remove("btn-primary"),e.target.classList.add("btn-success"),e.target.classList.add("disabled"),e.target.disabled=!0})).catch((e=>(console.error("Error:",e),!1)))}));const n=document.getElementById("entities-entity-update");n&&(i.a.setup_ext_entity_trading_name_listeners(),n.addEventListener("click",(e=>{if(e.preventDefault(),!document.getElementById("entity-form").checkValidity())return console.log("INVALID!"),!1;const t=document.getElementById("entity_id"),n=document.getElementById("entity_name"),a=document.getElementById("entity_identifier_nzbn"),i=document.getElementById("entity_identifier_ird"),c=document.getElementById("entity_classification_expense"),s=document.getElementById("entity_classification_revenue"),r=document.getElementById("entity_classification_gst_registered"),o=document.getElementById("entity_desc"),d=document.getElementById("entity_contact_address"),l=document.getElementById("entity_contact_postcode"),u=document.getElementById("entity_contact_email"),y=document.getElementById("entity_contact_phone"),m=document.getElementById("entity_contact_website"),_=document.getElementById("entity_contact_country");var v,p=t.value,g=n.value,E=[];document.querySelectorAll(".entity_trading_name").forEach((e=>{E.push({type:"TRADINGNAME",value:e.dataset.entityTradingName})})),""!=a.value&&(v="GS1:"+a.value,E.push({type:"GS1",value:a.value})),""!=i.value&&E.push({type:"IRD",value:i.value});var f=[];f.push({type:"CREDIT",value:s.value}),f.push({type:"DEBIT",value:c.value}),""!=r.value&&f.push({type:"NZ:GST",value:r.value});var h=[];""!=d.value&&h.push({type:"ADDRESS",value:d.value}),""!=l.value&&h.push({type:"POSTCODE",value:l.value}),""!=y.value&&h.push({type:"PHONE",value:y.value}),""!=u.value&&h.push({type:"EMAIL",value:u.value}),""!=m.value&&h.push({type:"WEBSITE",value:m.value});var I=o.value,B=_.value;const b={id_src:v,name:g,desc:I,identifier:E,classification:f,contact:h,country:B};fetch("/app/entities/"+p,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).then((t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);e.target.innerHTML='<i class="bi bi-check-circle-fill"></i> Entity Updated',e.target.classList.remove("btn-primary"),e.target.classList.add("btn-success")})).catch((e=>(console.error("Error:",e),!1)))})))}}},679:(e,t,n)=>{n.d(t,{a:()=>i});var a=n(572);class i{static async setup_listeners(){const e=document.getElementById("entities-feed-match-search");e&&e.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("entity_identifier_payee"),n=document.getElementById("entity_identifier_reference"),a=document.getElementById("entity_identifier_code"),i=t.value,c=n.value,s=a.value,r=`/app/entities/match/api/feed?payee=${encodeURIComponent(i)}&reference=${encodeURIComponent(c)}&code=${encodeURIComponent(s)}`,o=document.getElementById("entities-feed-match-results");fetch(r).then((e=>e.text())).then((async e=>{o.innerHTML=e})).catch((e=>{console.error("Error:",e)}))}));const t=document.getElementById("entities-search");t&&t.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("entity_name").value,n=`/app/entities/match/api/entity?name=${encodeURIComponent(t)}`,a=document.getElementById("entities-match-results");fetch(n).then((e=>e.text())).then((e=>{a.innerHTML=e,setTimeout((()=>{i.setup_entity_result_listeners()}),100)})).catch((e=>{console.error("Error:",e)}))}));const n=document.getElementById("ext-entities-search");n&&n.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("entity_name_search").value,n=`/app/entities/match/api/ext-entity?name=${encodeURIComponent(t)}`,a=document.getElementById("ext-entities-match-results");fetch(n).then((e=>e.text())).then((e=>{a.innerHTML=e,setTimeout((()=>{i.setup_ext_entity_result_listeners()}),100)})).catch((e=>{console.error("Error:",e)}))}))}static async setup_entity_result_listeners(){const e=document.querySelectorAll(".entity-transaction-match"),t=document.getElementById("entity_identifier_payee"),n=document.getElementById("entity_identifier_reference"),a=document.getElementById("entity_identifier_code"),c=t.value;n.value,a.value,e.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.target.dataset.entityId;return i.entity_match_payee(e.target,t,c)}))}))}static async setup_ext_entity_result_listeners(){const e=document.querySelectorAll(".ext-entity-transaction-match"),t=document.getElementById("entity_name"),n=document.getElementById("entity_identifier_nzbn"),c=document.getElementById("entity_identifier_ird"),s=document.getElementById("entity_desc"),r=document.getElementById("entity_contact_address"),o=document.getElementById("entity_contact_postcode"),d=document.getElementById("entity_contact_phone"),l=document.getElementById("entity_contact_website");document.getElementById("entity_contact_country"),e.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),e.target.dataset.entityId;const u=e.target.dataset.entityName,y=e.target.dataset,m=JSON.parse(y.entityIdentifier),_=JSON.parse(y.entityClassification),v=JSON.parse(y.entityContact);a.V.set("entity_base",{name:u,identifier:m,classification:_,contact:v});var p=[],g="";const E=document.getElementById("entity_identifier_tradingname_value");var f=document.getElementById("entity_identifier_tradingname_values"),h=E;for(const e of m)"TRADINGNAME"==e.type&&((h=E.cloneNode(!0)).removeAttribute("id"),h.classList.remove("visually-hidden"),h.classList.add("entity_trading_name"),h.innerHTML=e.value+'  <i class="bi bi-x-circle-fill"></i>',h.dataset.entityTradingName=e.value,p.push(e.value),g+=h.outerHTML);f.innerHTML=g,t.value=y.entityName,n.value=y.entityIdentifierNzbn,c.value=y.entityIdentifierIrd,s.value=y.entityClassificationBicDesc,r.value=y.entityContactAddress,o.value=y.entityContactPostcode,d.value=y.entityContactPhone,l.value=y.entityContactWebsite,setTimeout((()=>{i.setup_ext_entity_trading_name_listeners()}),100)}))}))}static async setup_ext_entity_trading_name_listeners(){document.querySelectorAll(".entity_trading_name").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),e.target.remove()}))}))}static async entity_match_payee(e,t,n){const a={feed:[{type:"BANK:PAYEE",value:n}]};fetch("/app/entities/"+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);e.innerHTML='<i class="bi bi-check-circle-fill"></i> Matched Transaction(s)',e.classList.remove("btn-primary"),e.classList.add("btn-success"),e.classList.add("disabled"),e.disabled=!0})).then((e=>!0)).catch((e=>(console.error("Error:",e),!1)))}}},572:(e,t,n)=>{n.d(t,{V:()=>a});class a{static get(e){const t=sessionStorage.getItem(e);return JSON.parse(t)}static set(e,t){return t=JSON.stringify(t),sessionStorage.setItem(e,t),t}static del(e){return sessionStorage.removeItem(e),!0}}}},c={};function s(e){var t=c[e];if(void 0!==t)return t.exports;var n=c[e]={exports:{}};return i[e](n,n.exports,s),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},s.a=(i,c,s)=>{var r;s&&((r=[]).d=-1);var o,d,l,u=new Set,y=i.exports,m=new Promise(((e,t)=>{l=t,d=e}));m[t]=y,m[e]=e=>(r&&e(r),u.forEach(e),m.catch((e=>{}))),i.exports=m,c((i=>{var c;o=(i=>i.map((i=>{if(null!==i&&"object"==typeof i){if(i[e])return i;if(i.then){var c=[];c.d=0,i.then((e=>{s[t]=e,a(c)}),(e=>{s[n]=e,a(c)}));var s={};return s[e]=e=>e(c),s}}var r={};return r[e]=e=>{},r[t]=i,r})))(i);var s=()=>o.map((e=>{if(e[n])throw e[n];return e[t]})),d=new Promise((t=>{(c=()=>t(s)).r=0;var n=e=>e!==r&&!u.has(e)&&(u.add(e),e&&!e.d&&(c.r++,e.push(c)));o.map((t=>t[e](n)))}));return c.r?d:s()}),(e=>(e?l(m[n]=e):d(y),a(r)))),r&&r.d<0&&(r.d=0)},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s(641)})();
//# sourceMappingURL=app.bundle.js.map